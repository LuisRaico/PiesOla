@model IEnumerable<PiesOla.Models.Proforma>

@{
    ViewData["Title"] = "Index";
}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
<div class="card text-center" >
  <div class="card-header" >
  </div>
  <div class="card-body" style="background: #A2D2FF ;">
    <h5 class="card-title"><h2 style="-webkit-text-stroke: 2px  black;color: #FDFEFE; text-align: center;  font-size: 50px;"> Carrito</h2></h5>
    <p class="card-text">
    </p>
  </div>
  <div class="card-footer text-muted">
  </div>
</div>


<table class="table">
    <thead>
        <tr>
           
            <th>
                @Html.DisplayNameFor(model => model.Producto.Marca)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Stock)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Precio)
            </th>

            <th>
                <p>.</p>
            </th>
        </tr>
    </thead>
    <tbody>
@foreach (var item in Model) {
        <tr>
            
            <td >
                @Html.DisplayFor(modelItem => item.Producto.Marca)
            </td>
            <td >
                @Html.DisplayFor(modelItem => item.Stock)
            </td>
            <td >
                @Html.DisplayFor(modelItem => item.Precio)
            </td>
            <td>
               
                <a asp-action="Edit" class="btn btn-info"  style="background: #A2D2FF"  asp-route-id="@item.Id">Editar</a>
                <a asp-action="Delete" class="btn btn-info"   style="background: #A2D2FF" asp-route-id="@item.Id">Borrar</a>

            </td>
        </tr>
}


<main>

<hr />

@{
          Decimal total = 0;
        
         var contar = 0;
      }
      @foreach (var item in Model){
         <tr>
            @{
              
               total = total + item.Precio*item.Stock;
               contar++;
            }
         </tr>
      }

                        <div id="carrito" class="table-responsive">
                            <table class="table" id="lista-compra">
                                <thead>
                                    
                                </thead>
                                
                                <hr />
                                <tr>
                                   
                               <span class="d-inline-block" tabindex="0" data-bs-toggle="popover" data-bs-trigger="hover focus" data-bs-content="Disabled popover" style=" margin-left:35%;">  
                                    <button class="btn btn-info" type="button" disabled >Total : S/. @total</button>
                                </span>
                                </tr>

                            </table>
                        </div>
                        <div class="row justify-content-around" style=" margin-left:15%;" >
                            <div class="col-xs-12 col-md-4" >
                                <a href="~/Catalogo" class="btn btn-outline-info" style="width:250px;">Seguir comprando</a>
                            </div>
                            <div class="col-xs-12 col-md-4">
                                
                               <a href="~/Proceso" class="btn btn-outline-info" style="width:250px;">Realizar Compra</a>
                            </div>
                        </div>
                        
              


                </div>


            </div>

        </div>
    </main>
        </tbody>
</table>

@if ((String)TempData["prueba02"] == "prueba02") 
{
    <input value="hola" id="prueba02" type="hidden">
}
@if ((String)TempData["prueba03"] == "prueba03") 
{
    <input value="hola" id="prueba03" type="hidden">
}

   <script>
       Swal.confirmar{
title:'bie'

       }
 </script>
   <script>
        
        var y = document.getElementById('prueba02').value;

        if(y == "hola") {

            Swal.fire(
                'Editado correctamente',
                'El Producto se ha editado correctamente',
                'success'
            )
        }
   </script> 
    <script>
        
        var y = document.getElementById('prueba03').value;

        if(y == "hola") {

            Swal.fire(
                'Eliminacion  correcta',
                'El Producto se ha Eliminado correctamente',
                'success'
            )
        }
   </script> 